import os, asyncio
from telethon import TelegramClient, events

# ุฏุฑุงูุช ุงุทูุงุนุงุช ุงุฒ Secrets ฺฏุชโูุงุจ
API_ID = int(os.getenv('API_ID', 0))
API_HASH = os.getenv('API_HASH', '')
BOT_TOKEN = os.getenv('BOT_TOKEN', '')
CH_ID = 'favme' # ุขุฏ ฺฉุงูุงู ุจุฏูู @

# ุฑุงู ุงูุฏุงุฒ ุฑุจุงุช
client = TelegramClient('favme_welcome', API_ID, API_HASH).start(bot_token=BOT_TOKEN)

print("๐ FavMe Welcome Bot is Running with Mehrdad's Custom Texts...")

@client.on(events.ChatAction)
async def welcome_manager(event):
    try:
        # ููุช ฺฉุณ ุนุถู ูโุดูุฏ
        if event.user_joined or event.user_added:
            user = await event.get_user()
            # ูุชู ุฎูุดโุขูุฏฺฏู ุงุฎุชุตุงุต ููุฑุฏุงุฏ
            welcome_msg = """ุณูุงู ุฏูุณุช ุนุฒุฒ

ู ุชูุถุญ ฺฉูุชุงู ุงูู ฺฉุงุฑ: ุงู ูพุงู ุจูโุตูุฑุช ุงุชููุงุชฺฉ ุชูุณุท ุจุงุช ุชูฺฏุฑุงู ู ฺฉุฏูุง ูพุงุชูู ุงุฑุณุงู ุดุฏูุ ูพุณ ุงฺฏู ุฌูุงุจ ูุฏุงุฏู ุจุฏูู ุง ุขููุงูู ุง ุฎูุงุจู ุง ุจู ุชูฺฏุฑุงู ุฏุณุชุฑุณ ูุฏุงุฑู.
ุฎุจโฆ

ุจู ฺฉุงูุงู ุดุฎุต ููุ ููุฑุฏุงุฏุ ุฎูุด ุงููุฏ.

ุงู ฺฉู ุงูุงู ุงูุฌุง ุนู ุงุญุชูุงูุงู ูโุณุฑ ุณููู ู ุนูุงููโ ูุดุชุฑฺฉ ุฏุงุฑูุ

ุงุฒ ููู ู ููุณู ฺฏุฑูุชู ุชุง ุญุงูโูููุง ุฑูุฒูุฑู ู ฺุฒุง ฺฉู ุชู ุงู ุฏูุง ูุฌุงุฒ ุจุง ูู ุดุฑฺฉ ูโุดู.
ุงูุฏูุงุฑู ุชู ฺฉุงูุงู ูุญุธุงุช ุฎูุจ ุฏุงุดุชู ุจุงุด ู ูุทุงูุจ ุจู ฺฉุงุฑุช ุจุงุฏ.

ููููู ฺฉู ูุณุช.
ุงฺฏู ุฎูุฏุช ูู ฺฉุงูุงู ุฏุงุฑุ ููฺฉุดู ูููโุฌุง ุจูุฑุณุชุ

ุจู ูุญุถ ุงู ฺฉู ุฎูุฏู (ูู ุฑุจุงุช) ุขููุงู ุจุดูุ ุญุชูุงู ุณุฑ ูโุฒูู.

ุงฺฏู ุฏูุณุช ุฏุงุดุชุ ุฎูุฏุช ุฑู ูู ูุนุฑู ฺฉู.
โจ ุจู ฺฉุงูุงู ุฎูุฏุช ุฎูุด ุงููุฏ @favme"""
            
            await client.send_message(CH_ID, welcome_msg)
            print("โ ูพุงู ุฎูุดโุขูุฏฺฏู ุงุฑุณุงู ุดุฏ.")

        # ููุช ฺฉุณ ููุช ูโุฏูุฏ
        elif event.user_left:
            # ูุชู ุฎุฏุงุญุงูุธ ุงุฎุชุตุงุต ููุฑุฏุงุฏ
            goodbye_msg = """ุณูุงู

ุงู ูพุงู ุจูโุตูุฑุช ุงุชููุงุชฺฉ ุชูุณุท ุจุงุช ุชูฺฏุฑุงู (ุจุง ูพุงุชูู) ุงุฑุณุงู ุดุฏูุ ููฺฉูู ุฎูุฏู ุงูุงู ุขููุงู ูุจุงุดู.
ุฏุฏู ฺฉู ุฏฺฏู ุชู ฺฉุงูุงู ูุณุชุ ฺฏูุชู ู ุฎุฏุงุญุงูุธ ฺฉูุชุงู ฺฉูู.

ุดุงุฏ ูุถุง ุง ูุญุชูุง ุจุง ุณูููโุงุช ููุฎูู ูุฏุงุฑู ฺฉู ฺฉุงููุงู ุทุจุน ูุณุช .
ุฏุฑ ูุฑ ุตูุฑุช ููููู ุงุฒ ููุช ฺฉู ููุฑุงู ุจูุฏ.

ุจุฑุงุช ุขุฑุฒู ุณูุงูุช ู ุฑูุฒุง ุฎูุจ ุฏุงุฑู.
@favme"""
            
            await client.send_message(CH_ID, goodbye_msg)
            print("๐ ูพุงู ุฎุฏุงุญุงูุธ ุงุฑุณุงู ุดุฏ.")

    except Exception as e:
        print(f"โ ุงุฑูุฑ: {e}")

# ุฒูุฏู ูฺฏู ุฏุงุดุชู ุฑุจุงุช
client.run_until_disconnected()
